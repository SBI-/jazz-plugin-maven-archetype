# jazz-plugin-maven-archetype
Maven archetype to generate a jazz plugin project.

All of the following sections make assumptions about your working environment. At least git and maven are absolutely necessary to use this archetype. The instructions assume that both executables are on your path and consequently useable with just the program name.

Further, you will need to have installed the [jazz base service](URL), which is a dependency for any services created with this archetype. Any maven builds without this dependency available in your local maven repository will fail. Also, you need to have the [jazz sdk p2 repository](URL) available in your maven repository. It is also suggested that you have the [jazz jetty environment](https://github.com/innerjoin/jazz-debug-environment) available for a rapid development and test cycle.

## Example archetype usage

This section shows how to create an example service from the archetype. It uses default settings and is absolutely not recommended for usage in a productive environment and only serves as an example.

1. Clone this repository.
2. Run setup.ps1 / setup.sh
3. Three consecutive successful maven build cycles should run.
4. Inside the target folder, there should now be a folder named  com.siemens.example.parent  with the example service structure.
5. You can now run  mvn install  from inside the  com.siemens.example.parent  folder to build the example service plugin.

## Bootstrapping a new jazz service with the archetype

## Detailed archetype usage

## File structure explanation (using the simple example)

For brevity, this section only covers files and folders that are relevant to understanding the basic structure generated by the archetype (not the file structure of the actual archetype). A finished build will contain more files. files not mentioned here will generally not need to be touched when working on your plugin.

|File structure                                                                      | Explanation
|------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------
|<pre> com.siemens.example.parent                                              </pre>| 
|<pre> │   pom.xml                                                             </pre>| Parent pom of the plugin build. This is what you want to run most of the time to get a complete plugin build.
|<pre> ├───.mvn                                                                </pre>| Maven settings folder
|<pre> ├───feature                                                             </pre>| Feature module folder
|<pre> │   │   feature.xml                                                     </pre>| Feature configuration with required plugins, feature description and plugin definition
|<pre> │   │   pom.xml                                                         </pre>| Sub module pom for creating the plugin feature files
|<pre> │   └───target                                                          </pre>| Generated feature files
|<pre> ├───plugin                                                              </pre>| Plugin module folder. This contains the source code for your plugin and is the most important sub module of the plugin project.
|<pre> │   │   plugin.xml                                                      </pre>| Plugin definition. This is the file used by the application server to load your plugin. Contains the extension point and components used by our plugin to attach to the jazz application. Must contain the proper names of of your service.
|<pre> │   │   pom.xml                                                         </pre>| Sub module pom for creating plugin files 
|<pre> │   ├───conf                                                            </pre>| Default jazz configuration files for use with an application server
|<pre> │   ├───META-INF                                                        </pre>| 
|<pre> │   │       MANIFEST.MF                                                 </pre>| OSGI configuration of your plugin. Contains required bundles and imported packages as well as the bundle classpath. This needs to mirror the settings in your pom and contain all dependencies your plugin builds with.
|<pre> │   │                                                                   </pre>| 
|<pre> │   ├───src                                                             </pre>| Actual plugin source code
|<pre> │   │   └───main                                                        </pre>| 
|<pre> │   │       └───java                                                    </pre>| 
|<pre> │   │           └───com                                                 </pre>| 
|<pre> │   │               └───siemens                                         </pre>| 
|<pre> │   │                   └───example                                     </pre>| 
|<pre> │   │                       │   ExampleService.java                     </pre>| The main service implementation. This file needs to be mentioned in the plugin.xml
|<pre> │   │                       │   IExampleService.java                    </pre>| The main service interface. This file needs to be mentioned in the plugin.xml
|<pre> │   │                       └───builder                                 </pre>| Builder implementations used for the example
|<pre> │   └───target                                                          </pre>| Generated plugin files. If you are using jetty, your service description will have to point to this location for proper loading.
|<pre>\|       ├───dependency                                                  </pre>| Dependency jars. If you are using jetty, you will also have to reference this folder.
|<pre> ├───target                                                              </pre>| Generated parent build files
|<pre> │                                                                       </pre>| 
|<pre> └───update-site                                                         </pre>| Update site sub module. This aggregates all build results of the entire project and creates deployable zip files for production use with tomcat/liberty/websphere.
|<pre>     │   pom.xml                                                         </pre>| Sub module pom for aggregating all modules as a deployable package.
|<pre>     ├───target                                                          </pre>| Aggregated build results
|<pre>     │   └───com.siemens.example.updatesite-1.0.0-SNAPSHOT.zip           </pre>| Deployable plugin. This can be extracted and used on your application server.
|<pre>     └───templates                                                       </pre>| Template xml files that are filtered during the build. These files are neccessary for generating the proper zip file structure for deploying the plugin on an application server.
|<pre>         │     site.xml                                                  </pre>| Site descriptor for the loaded feature
|<pre>         │     update-site.ini                                           </pre>| Update site description with file location and name of the feature to be loaded
|<pre>         └───  zip.xml                                                   </pre>| Zip file structure of the resulting plugin

